<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>K'dabra ‚Äî Landing</title>

    <!-- Montserrat -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600;700&display=swap" rel="stylesheet">

    <style>
        :root {
            --btn-brown: #63400A;
            --btn-brown-hover: #27f5be;
            --app-gradient: linear-gradient(90deg,#FFB84D,#27f5be);
            --white: #ffffff;
        }

        html, body {
            scroll-snap-type: y mandatory;
            height: 100%;
            overflow-x: hidden;
            margin: 0;
            font-family: Arial, Arial, Arial;
            color: var(--white);
            background: #111;
        }

         /* Scroll fullpages */
        .page-wrap {
            height: auto;
        }

         section.full {
             min-height: 100vh;
             scroll-snap-align: start;
             display: flex;
             align-items: center;
             justify-content: center;
             position: relative;
         }

         /* Fondo base para todas las secciones */
         section.full {
             background-color: ;
         }

         /* Background images per section */
        .s1 {
            min-height: 100vh; /* fuerza altura completa */
            display: flex;
            position: relative;
            background-image: url('images/page1.jpg');
            background-repeat: no-repeat;
            background-position: center center;
            background-size: contain;
        }

         .s2 {
             background-image: url('images/page2.jpg');
             background-repeat: no-repeat;
             background-position: center center;
             background-size: contain;
         }

         .s3 {
             background-image: url('images/page3.jpg');
             background-repeat: no-repeat;
             background-position: center center;
             background-size: contain;
         }

         .s4 {
             background-image: url('images/page4.jpg');
             background-repeat: no-repeat;
             background-position: center center;
             background-size: contain;
         }

         /* Overlay */
        .overlay {
            position: absolute;
            inset: 0;
            display: none;
            pointer-events: none;
        }

         /* Container */
         .container {
             width: 100%;
             max-width: 1200px;
             padding: 40px;
             box-sizing: border-box;
             position: relative;
             z-index: 3;
         }

        

         /* ---------------------------------
        LEFT 4 BUTTONS ‚Äî SOLO EN PAGE 1
        --------------------------------- */

         /* Aparecen solo en la secci√≥n 1 */
        /* ---------- CONTROL DE VISIBILIDAD (botones fijos) ---------- */

        /* contenedor fijo (posici√≥n y est√©tica) - siempre fixed para estabilidad */
        .left-buttons {
            position: fixed;
            left: 120px;
            top: 80%;
            transform: translateY(-50%) translateY(-8px); /* empezamos levemente desplazados */
            display: grid;
            grid-template-columns: repeat(2, auto);
            grid-template-rows: repeat(2, auto);
            gap: 3px;
            z-index: 9999;
            opacity: 0;
            pointer-events: none;
            transition: opacity .22s ease, transform .18s ease;
        }

            /* estilo de los <a> (sin cambios funcionales) */
            .left-buttons a {
                display: inline-block;
                padding: 13px 20px;
                background: conic-gradient(30deg, #27f5be, #27f5be);
                color: var(--white);
                border-radius: 4px;
                text-decoration: none;
                font-size: 22px;
                font-weight: 600;
                transition: background-color .18s ease, transform .08s ease;
                box-shadow: 0 6px 18px rgba(0,0,0,0.15);
            }

                .left-buttons a:hover {
                    background: var(--btn-brown-hover);
                    color: #000;
                    transform: translateY(-2px);
                }

        /* boton de descarga bottom-right (fixed pero oculto por defecto) */
        .app-download {
            position: fixed;
            right: 11%;
            bottom: 5%;
            z-index: 9999;
            opacity: 0;
            pointer-events: none;
            transition: opacity .22s ease, transform .18s ease;
            transform: translateY(8px);
        }

            .app-download .btn {
                padding: 10px 20px;
                border-radius: 4px;
                color: #000; /* ‚Üê texto blanco */
                background: linear-gradient(30deg, #27f5be, #057054); /* ‚Üê nuevo fondo */
                font-size: 25px;
                text-decoration: none;
                transition: background-color .18s ease, transform .08s ease; /* mismo efecto */
                box-shadow: 0 6px 18px rgba(0,0,0,0.2);
            }

                .app-download .btn:hover {
                    filter: brightness(.95);
                    transform: translateY(-2px);
                }
            .app-download .text {
                font-size: 22px; /* ajust√° ac√° el tama√±o */
                color: #057054; /* o el color que quieras */
                text-shadow: 0 0 15px #27f5be;
                margin-top: 4px;
                text-align: center;
            }


        /* cuando a√±adamos la clase .visible, aparecen y quedan en su lugar */
        .left-buttons.visible {
            opacity: 1;
            pointer-events: auto;
            transform: translateY(-50%) translateY(0);
        }

        .app-download.visible {
            opacity: 1;
            pointer-events: auto;
            transform: translateY(0);
        }

        

         /* ---------------------------------
        SECTION 2 ‚Äî MODELOS
        --------------------------------- */
        #slot-luna,
        #slot-sol,
        #slot-melissa {
            position: absolute; /* ‚Üê hace que puedas moverlos donde quieras */
            z-index: 10;
        }

        #slot-luna {
            top: 65px;
            left: 0%;
        }

        #slot-sol {
            top: 65px;
            left: 39%;
        }

        #slot-melissa {
            top: 65px;
            left: 78%;
            position: absolute;
        }

            /* Texto "PROXIMAMENTE" */
            #slot-melissa .coming {
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                color: #057054;
                font-size: 26px;
                font-weight: 900;
                text-shadow: 0 0 20px #27f5be;
                background: none;
                opacity: 0;
                pointer-events: none;
                transition: opacity .25s ease;
            }

            /* Mostrar al pasar el cursor */
            #slot-melissa:hover .coming {
                opacity: 1;
            }

        /* LIGHTBOX GENERAL */
        #lightbox {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.85);
            display: flex;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(4px);
            z-index: 999999;
        }

            #lightbox.hidden {
                display: none;
            }

            #lightbox img {
                max-width: 90%;
                max-height: 90%;
                border-radius: 8px;
                cursor: pointer;
            }

        .lightbox-close {
            position: absolute;
            top: 20px;
            right: 25px;
            font-size: 48px;
            color: white;
            cursor: pointer;
            user-select: none;
        }

        .models-row {
            width: 80%;
            max-width: 900px;
            margin-left: 5%; /* queda pegado a la izquierda */
            margin-right: auto;
            position: relative; /* ahora sirve como ‚Äúescenario‚Äù */
            height: 500px;
            gap: 26px;
            justify-content: center;
            align-items: flex-start;
            padding: 40px 24px;
            box-sizing: border-box;
        }

        .model-slot {
            width: 35%;
            aspect-ratio: 9 / 14; /* ‚Üê ESTO los hace cuadrados */
            background: rgba(255,255,255,0.06);
            border-radius: 5px;
            overflow: hidden;
            position: relative;
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
        }

             .model-slot.empty {
                 display: flex;
                 align-items: center;
                 justify-content: center;
                 color: rgba(255,255,255,0.7);
                 font-weight: 700;
                 font-size: 20px;
             }

         /* ---------------------------------
        SECTION 3 ‚Äî APP / FORM
        --------------------------------- */
        #google-doc-container {
            position: absolute;
            top: -110px;
            left: 675px; /* ahora s√≠ responde */
            z-index: 50;
            cursor: move;
        }


         .page3-inner {
             display: flex;
             gap: 40px;
             align-items: start;
             justify-content: center;
             padding: 40px;
             box-sizing: border-box;
         }

        .slot-gestual {
            width: 27%;
            aspect-ratio: 9 / 14;
            background: rgba(255,255,255,0.06);
            border-radius: 5px;
            overflow: hidden;
            box-shadow: 0 8px 20px rgba(0,0,0,.15);
        }

         .slot-form {
             width: 470px;
             height: 500px;
             background: rgba(255,255,255,0.03);
             border-radius: 5px;
             padding: 10px;
             box-sizing: border-box;
             overflow: auto;
         }

        #slot-form iframe {
            width: 100%;
            height: 100%;
            border: none;
        }
         /* ---------------------------------
        CAROUSEL
        --------------------------------- */

        .carousel {
            position: relative;
            width: 100%;
            height: 100%;
            background: transparent; /* <- importante: quitar el #111 */
            display: flex;
            align-items: center;
            justify-content: center;
        }

             .carousel .slides {
                 position: relative;
                 width: 100%;
                 height: 100%;
             }

             .carousel img, .carousel video {
                 position: absolute;
                 inset: 0;
                 width: 100%;
                 height: 100%;
                 object-fit: cover;
                 opacity: 0;
                 transition: opacity .25s ease, transform .25s ease;
             }

                 .carousel img.active, .carousel video.active {
                     opacity: 1;
                     transform: scale(1);
                 }

             .carousel:hover img.active, .carousel:hover video.active {
                 transform: scale(1.02);
             }

         .dots {
             position: absolute;
             bottom: 10px;
             left: 50%;
             transform: translateX(-50%);
             display: flex;
             gap: 8px;
             z-index: 10;
         }

             .dots .dot {
                 width: 10px;
                 height: 10px;
                 border-radius: 50%;
                 background: rgba(255,255,255,.6);
                 cursor: pointer;
                 transition: transform .12s;
             }

                 .dots .dot.active {
                     background: #fff;
                     transform: scale(1.15);
                 }

         /* ---------------------------------
        RESPONSIVE
        --------------------------------- */

         @media(max-width:1200px) {
             .models-row {
                 gap: 20px;
                 padding: 30px;
                 transform: scale(.95);
             }

             .model-slot {
                 width: 330px;
                 height: 316px;
             }

             .slot-gestual {
                 width: 330px;
                 height: 316px;
             }

             .slot-form {
                 width: 180px;
                 height: 275px;
             }
         }

         @media(max-width:780px) {
             .left-buttons {
                 display: none;
             }

             .models-row {
                 flex-direction: column;
                 align-items: center;
                 transform: none;
             }

             .model-slot {
                 width: 86%;
                 height: auto;
                 aspect-ratio: 9/16;
             }

             .page3-inner {
                 flex-direction: column;
                 gap: 18px;
                 padding: 18px;
                 align-items: center;
             }

            .slot-gestual, .slot-form {
                width: 50%;
                height: auto;
                aspect-ratio: 9/16;
            }
         }

         .anchor-target {
             scroll-margin-top: 30px;
         }

        .mobile-carousel-wrapper {
            display: none;
        }

        /* mover el slot de formulario manualmente */
        .draggable {
            position: absolute;
            top: -15px;
            left: 1300px;
            cursor: move;
            z-index: 9999;
        }
        /* mover el slot de carrusel gestual manualmente */
        .slot-gestual.draggable {
            position: absolute;
            top: -130px; /* posici√≥n inicial */
            left: 75px;
            cursor: move;
            z-index: 9999;
        }
        /* ===============================
   MOBILE 9:16 (solo celulares)
   =============================== */
        @media (max-width: 780px) {

            /* ===== FONDOS MOBILE ===== */
            .s1 {
                background-image: url('images/page1-mobile.jpg');
            }

            .s2 {
                background-image: url('images/page2-mobile.jpg');
            }

            .s3 {
                background-image: url('images/page3-mobile.jpg');
            }

            .s4 {
                background-image: url('images/page4-mobile.jpg');
            }

            section.full {
                background-size: cover;
                background-position: center top;
            }

            #page2 {
                align-items: flex-start;
            }
            /* ===== PAGE 1 ‚Äî BOTONES =====üìå C√≥mo lo ajust√°s vos Subir / bajar botones ‚Üí top Separaci√≥n ‚Üí gap Tama√±o ‚Üí font-size, padding */
            .left-buttons {
                position: absolute;
                top: 72%;
                left: 20%;
                transform: translateX(-50%);
                display: flex;
                flex-direction: column;
                gap: 5px;
                /* estado oculto por defecto */
                opacity: 0;
                pointer-events: none;
            }

                .left-buttons.visible {
                    opacity: 1;
                    pointer-events: auto;
                }

                .left-buttons a {
                    font-size: 18px;
                    padding: 14px 44px;
                    background: #27f5be;
                    color: #000;
                    border: 1px solid rgba(255,255,255,.5);
                }

                    .left-buttons a:active {
                        background: #27f5be;
                        color: #000;
                    }
                    .left-buttons a:nth-child(4) {
                        display: none;
                    }

            /* ===== DESCARGA APP ===== */
            .app-download {
                position: absolute;
                bottom: 8%;
                left: 24%;
                text-align: left;
                /* oculto por defecto */
                opacity: 0;
                pointer-events: none;
            }

            app-download.visible {
                opacity: 1;
                pointer-events: auto;
            }

            .app-download .btn {
                font-size: 20px;
                padding: 12px 22px;
            }

            .app-download .text {
                font-size: 18px;
                position: absolute;
                top: 83%;
                left: 1%;
            }
            /* ===== PAGE 2 ‚Äî CARRUSELES ===== */
            .mobile-carousel-wrapper {
                display: block;
            }
            .models-row {
                display: none !important;
            }

            /* CONTENEDOR PRINCIPAL (editable) */
            .mobile-carousel-wrapper {
                position: absolute;
                top: 140px; /* ‚¨Ö mover vertical */
                left: 0;
                width: 100%;
                height: 65vh; /* ‚¨Ö tama√±o general */
                z-index: 30;
                background: transparent;
            }

            .mobile-carousel-track {
                display: flex;
                gap: 5px;
                height: 100%;
                overflow-x: auto;
                scroll-snap-type: x mandatory;
                padding: 0 16px;
            }

            
            .mobile-item {
                min-width: 75%; /* ‚¨Ö ancho de cada carrusel */
                height: 100%;
                scroll-snap-align: center;
                position: relative;
            }

            .mini-carousel {
                width: 100%;
                height: 100%;
                border-radius: 10px;
                overflow: hidden;
                position: relative;
            }

                .mini-carousel img {
                    position: absolute;
                    inset: 0;
                    width: 100%;
                    height: 100%;
                    object-fit: cover;
                    opacity: 0;
                    transition: opacity .3s ease;
                }

                    .mini-carousel img.active {
                        opacity: 1;
                    }

            /* NOMBRE + HALO */
            .mobile-label {
                font-size: 35px;
                position: absolute;
                bottom: 20px;
                left: 50%;
                transform: translateX(-50%);
                color: #fff;
                font-weight: 700;
                letter-spacing: 1px;
                text-shadow: 0 0 20px rgba(0,0,0,.9);
                pointer-events: none;
            }
            .coming-mobile {
                position: absolute;
                top: 80%;
                left: 50%;
                transform: translate(-50%, -50%);
                color: #057054;
                font-size: 28px;
                font-weight: 900;
                text-shadow: 0 0 20px #27f5be;
                opacity: 0;
                pointer-events: none;
                transition: opacity .4s ease;
                z-index: 5;
            }

                .coming-mobile.visible {
                    opacity: 1;
                }
            .model-slot {
                width: 10%;
                aspect-ratio: 9 / 16;
            }

            #slot-luna,
            #slot-sol,
            #slot-melissa {
                position: absolute;
            }

            /* POSICIONES MOBILE ‚Äì ajustables */
            #slot-luna {
                top: -80px;
                left: -20%;
                width: 80%;
            }

            #slot-sol {
                top: -80px;
                left: 60%;
                width: 80%;
            }

            #slot-melissa {
                top: 10px;
                left: 10%;
                width: 80%;
            }
            /* ===== PAGE 3 ‚Äî GESTUAL ===== */
            .slot-gestual {
                position: absolute;
                top: 360px;
                left: 1%;
                width: 40%;
                aspect-ratio: 9 / 16;
            }
            #slot-gestual {
                display: none !important;
            }
            /* ===== FORMULARIO ===== */
            #google-doc-container {
                top: -240px; /* ‚¨Ö mover vertical */
                left: 1%;
                width: 190%; /* ‚¨Ö ancho */
                height: 65vh; /* ‚¨Ö alto */
            }
        }

          
        

    </style>

</head>
<body>

    <!-- Fixed left 2x2 buttons -->
    <nav class="left-buttons" aria-label="Navegaci√≥n r√°pida">
        <a href="#slot-form">Sumate a lo que viene!!!</a>
        <a href="#page2">NUESTROS DISE√ëOS</a>
        <a href="#page4">¬øQui√©nes Somos?</a>
        <a href="#page3"> Control con MAGIA</a>
    </nav>

    <!-- App download bottom-right -->
    <div class="app-download">
        <a class="btn" href="https://play.google.com/store/apps/details?id=com.kadabra.iluminacion&pcampaignid=web_share" target="_blank">Descargar app Android</a>
        <div style="display:flex; gap:12px; margin-top:18px;">
        </div>
        <div class="text">Pronto Disponible para IOS</div>
    </div>

    <!-- Pages wrapper -->
    <div class="page-wrap">

        <!-- SECTION 1 (hero) -->
        <section id="page1" class="full s1" aria="Portada">
            <div class="overlay"></div>
            <div class="container">
                <!-- Texto principal ya integrado en la imagen; incluimos CTA accesible -->
                <div style="max-width:720px; margin-left:6%; text-align:left;">

                    <div style="display:flex; gap:12px; margin-top:18px;">

                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION 2 (productos) -->
        <section id="page2" class="full s2" aria-label="Productos">
            <div class="overlay"></div>
            <div class="container">
                <!-- T√≠tulo visible (aunque el dise√±o est√° en la imagen) -->
                <!-- modelos row (los recuadros que me diste) -->
                <div class="models-row">
                    <!-- LUNA carousel -->
                    <div class="model-slot" id="slot-luna">
                        <div class="carousel" data-auto="true" data-interval="6000">
                            <div class="slides">
                                <!-- Reemplazar estas im√°genes por tus assets (primero imagen est√°tica, luego gif, luego m√°s jpgs) -->
                                <img src="images/luna_1.jpg" class="active" alt="Luna 1">
                                <img src="images/luna_2.gif" alt="Luna animada">
                                <img src="images/luna_3.gif" alt="Luna animada">
                                <img src="images/luna_4.jpg" alt="Luna 4">
                                <img src="images/luna_5.jpg" alt="Luna 5">
                                <img src="images/luna_6.jpg" alt="Luna 6">
                                <img src="images/luna_7.jpg" alt="Luna 7">
                                <img src="images/luna_8.jpg" alt="Luna 8">
                                <img src="images/luna_9.jpg" alt="Luna 9">
                            </div>
                            <div class="dots"></div>
                        </div>
                    </div>

                    <!-- SOL carousel -->
                    <div class="model-slot" id="slot-sol">
                        <div class="carousel" data-auto="true" data-interval="6500">
                            <div class="slides">
                                <img src="images/sol_1.jpg" class="active" alt="Sol 1">
                                <img src="images/sol_2.gif" alt="Sol animado">
                                <img src="images/sol_3.gif" alt="Sol animado">
                                <img src="images/sol_4.jpg" alt="Sol 4">
                                <img src="images/sol_5.jpg" alt="Sol 5">
                                <img src="images/sol_6.jpg" alt="Sol 6">
                                <img src="images/sol_7.jpg" alt="Sol 7">
                                <img src="images/sol_8.jpg" alt="Sol 8">
                                <img src="images/sol_9.jpg" alt="Sol 9">
                                <img src="images/sol_10.jpg" alt="Sol 10">
                                <img src="images/sol_11.jpg" alt="Sol 11">
                            </div>
                            <div class="dots"></div>
                        </div>
                    </div>

                    <!-- MELISSA placeholder -->
                    <div id="slot-melissa" class="model-slot">

                        <!-- Carrusel -->
                        <div class="carousel" data-auto="true" data-interval="7000">
                            <!-- Tus im√°genes -->
                            <div class="slides">
                                <img src="images/melissa_1.jpg" class="active" alt="Sol 1">

                            </div>

                            <!-- Texto PROXIMAMENTE -->
                            <div class="coming">PROXIMAMENTE</div>

                        </div>
                    </div>
                </div>

                <!-- ===============================
                MOBILE ‚Äî CARRUSEL DE CARRUSELES
                =============================== -->
                <div class="mobile-carousel-wrapper">

                    <div class="mobile-carousel-track">

                        <!-- LUNA -->
                        <div class="mobile-item" data-gallery="luna">
                            <div class="mini-carousel">
                                <img src="images/luna_1.jpg" class="active">
                                <img src="images/luna_2.gif">
                                <img src="images/luna_3.gif">
                                <img src="images/luna_4.jpg">
                                <img src="images/luna_5.jpg" alt="Luna 5">
                                <img src="images/luna_6.jpg" alt="Luna 6">
                                <img src="images/luna_7.jpg" alt="Luna 7">
                                <img src="images/luna_8.jpg" alt="Luna 8">
                                <img src="images/luna_9.jpg" alt="Luna 9">
                            </div>
                            <div class="mobile-label">LUNA</div>
                        </div>

                        <!-- SOL -->
                        <div class="mobile-item" data-gallery="sol">
                            <div class="mini-carousel">
                                <img src="images/sol_1.jpg" class="active" alt="Sol 1">
                                <img src="images/sol_2.gif" alt="Sol animado">
                                <img src="images/sol_3.gif" alt="Sol animado">
                                <img src="images/sol_4.jpg" alt="Sol 4">
                                <img src="images/sol_5.jpg" alt="Sol 5">
                                <img src="images/sol_6.jpg" alt="Sol 6">
                                <img src="images/sol_7.jpg" alt="Sol 7">
                                <img src="images/sol_8.jpg" alt="Sol 8">
                                <img src="images/sol_9.jpg" alt="Sol 9">
                                <img src="images/sol_10.jpg" alt="Sol 10">
                                <img src="images/sol_11.jpg" alt="Sol 11">
                            </div>
                            <div class="mobile-label">SOL</div>
                        </div>

                        <!-- MELISSA -->
                        <div class="mobile-item melissa" data-gallery="melissa">
                            <div class="mini-carousel">
                                <img src="images/melissa_1.jpg">
                            </div>

                            <div class="coming coming-mobile">PROXIMAMENTE</div>
                            <div class="mobile-label">MELISSA</div>
                        </div>

                        <!-- APP + GESTUAL -->
                        <div class="mobile-item" data-gallery="gestual">
                            <div class="mini-carousel">
                                <img src="images/gestual_1.gif" class="active">
                                <img src="images/gestual_2.gif">
                                <img src="images/gestual_3.jpg" alt="gestual 3">
                            </div>
                            <div class="mobile-label">APP & GESTUAL</div>
                        </div>

                    </div>
                </div>

        </section>

        <!-- SECTION 3 (app & gestual + formulario) -->
        <section id="page3" class="full s3" aria-label="App y gestual">
            <div class="overlay"></div>
            <div class="container">

                <!-- SOLO carrusel gestual en el flex -->
                <div class="page3-inner">
                    <div class="slot-gestual draggable" id="slot-gestual">
                        <div class="carousel" data-auto="true" data-interval="7000" data-gallery="slot-gestual">
                            <div class="slides">
                                <img src="images/gestual_1.gif" class="active">
                                <img src="images/gestual_2.gif">
                                <img src="images/gestual_3.jpg" alt="gestual 3">
                            </div>
                            <div class="dots"></div>
                        </div>
                    </div>
                </div>

                <!-- FORMULARIO FUERA DEL FLEX -->
                <div id="google-doc-container" class="draggable">
                    <div class="slot-form" id="slot-form">
                        <iframe src="https://docs.google.com/forms/d/e/1FAIpQLSdKzm6vuRIVh3XjKB7LHHP4oJjRDl56FYncTK54Lu0sEjA8pA/viewform?embedded=true"></iframe>
                    </div>
                </div>

            </div>
        </section>


        <!-- SECTION 4 (quienes somos - storytelling) -->
        <section id="page4" class="full s4" aria-label="Qui√©nes somos">
            <div class="overlay"></div>
            <div class="container">
                <!-- Todo el contenido textual ya est√° en la imagen; solo dejamos ancla -->
            </div>
        </section>

    </div> <!-- /page-wrap -->
    <!-- SCRIPTS: carrusel gen√©rico -->
    
    <script>
        /* Carrusel unificado: auto-advance, hover start/stop, click para next, y dots */
        (function () {
            document.querySelectorAll('.carousel').forEach(root => {
                const slides = Array.from(root.querySelectorAll('.slides > img, .slides > video'));
                if (!slides.length) return;

                const dotsWrap = root.querySelector('.dots');
                let idx = slides.findIndex(s => s.classList.contains('active'));
                if (idx < 0) idx = 0;

                // crear dots si no existen
                if (dotsWrap && dotsWrap.children.length === 0) {
                    slides.forEach((s, i) => {
                        const dot = document.createElement('span');
                        dot.className = 'dot' + (i === idx ? ' active' : '');
                        dot.addEventListener('click', (ev) => { show(i); stopAuto(); });
                        dotsWrap.appendChild(dot);
                    });
                }
                const dots = dotsWrap ? Array.from(dotsWrap.children) : [];

                function show(i) {
                    slides.forEach((s, ii) => s.classList.toggle('active', ii === i));
                    dots.forEach((d, ii) => d.classList.toggle('active', ii === i));
                    idx = i;
                }

                // siguiente
                function next() {
                    idx = (idx + 1) % slides.length;
                    show(idx);
                }

                // click en el carousel avanza
                root.addEventListener('click', (e) => {
                    // evitar que clicks en controles internos (si hubiera) interfieran
                    const tag = e.target.tagName.toLowerCase();
                    if (tag === 'a' || tag === 'button' || e.target.classList.contains('dot')) return;
                    next();
                    stopAuto();
                });

                // auto
                let autoTimer = null;
                const auto = root.dataset.auto === 'true';
                const interval = parseInt(root.dataset.interval || 2500, 10);
                function startAuto() {
                    if (!auto) return;
                    stopAuto();
                    autoTimer = setInterval(next, interval);
                }
                function stopAuto() {
                    if (autoTimer) { clearInterval(autoTimer); autoTimer = null; }
                }



                // mostrar inicial
                show(idx);

                // arrancar autoadvance si corresponde
                if (auto) startAuto();
            });
        })();
    </script>

    <script>
        /* Mostrar/ocultar los botones fijos seg√∫n si la secci√≥n .s1 est√° en pantalla.
           No modifica funciones existentes. Usa IntersectionObserver. */

        (function () {
            const leftButtons = document.querySelector('.left-buttons');
            const appDownload = document.querySelector('.app-download');
            const target = document.querySelector('.s1');

            if (!leftButtons || !appDownload || !target) return; // seguridad

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting && entry.intersectionRatio > 0.45) {
                        leftButtons.classList.add('visible');
                        appDownload.classList.add('visible');
                    } else {
                        leftButtons.classList.remove('visible');
                        appDownload.classList.remove('visible');
                    }
                });
            }, {
                root: null,
                threshold: [0.0, 0.25, 0.45, 0.75, 1.0]
            });

            observer.observe(target);

            // adicional: si la p√°gina carga con hash a otra secci√≥n, ocultamos hasta volver a .s1
            window.addEventListener('hashchange', () => {
                // esto lo maneja el observer, no hace falta m√°s
            }, false);
        })();
    </script>
    <script>
        /* Forzar smooth scroll real sin interferencias */
        document.querySelectorAll('.left-buttons a').forEach(a => {
            a.addEventListener('click', (e) => {
                const targetID = a.getAttribute('href');
                if (!targetID.startsWith('#')) return;

                e.preventDefault();
                const el = document.querySelector(targetID);
                if (!el) return;

                el.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            });
        });
    </script>

    <script>
        document.addEventListener("DOMContentLoaded", () => {

            const lightbox = document.getElementById("lightbox");
            const lightboxImg = document.getElementById("lightbox-img");
            const closeBtn = document.querySelector(".lightbox-close");

            let currentCarousel = null;
            let currentIndex = 0;

            // Al hacer clic en cualquier carrusel ‚Üí se abre el visor
            document.querySelectorAll(".carousel").forEach(carousel => {
                carousel.addEventListener("click", () => {
                    const slides = carousel.querySelectorAll("img");
                    if (!slides.length) return;

                    currentCarousel = slides;
                    currentIndex = [...slides].findIndex(img => img.classList.contains("active"));
                    if (currentIndex < 0) currentIndex = 0;

                    openLightbox(slides[currentIndex].src);
                });
            });

            function openLightbox(src) {
                lightboxImg.src = src;
                lightbox.classList.remove("hidden");
            }

            function closeLightbox() {
                lightbox.classList.add("hidden");
            }

            // Click sobre la imagen ‚Üí siguiente imagen
            lightboxImg.addEventListener("click", () => {
                if (!currentCarousel) return;
                currentIndex = (currentIndex + 1) % currentCarousel.length;
                lightboxImg.src = currentCarousel[currentIndex].src;
            });

            // Bot√≥n de cierre
            closeBtn.addEventListener("click", closeLightbox);

            // Click fuera de la imagen ‚Üí cerrar
            lightbox.addEventListener("click", (e) => {
                if (e.target === lightbox) closeLightbox();
            });

        });
    </script>

    <!-- lightbox: abrir imagenes con click -->
    <div id="lightbox" class="hidden">
        <div class="lightbox-close">√ó</div>
        <img id="lightbox-img" src="">
    </div>

    <!-- mover manualmente el fomulario -->
    <script>
        document.querySelectorAll('.draggable').forEach(el => {
            let isDown = false, offsetX = 0, offsetY = 0;

            el.addEventListener('mousedown', e => {
                isDown = true;
                offsetX = e.clientX - el.offsetLeft;
                offsetY = e.clientY - el.offsetTop;
            });

            document.addEventListener('mouseup', () => isDown = false);

            document.addEventListener('mousemove', e => {
                if (!isDown) return;
                el.style.left = (e.clientX - offsetX) + 'px';
                el.style.top = (e.clientY - offsetY) + 'px';
            });
        });
    </script>

    <script>
        document.querySelectorAll('.mini-carousel').forEach(carousel => {
            const imgs = carousel.querySelectorAll('img');
            let i = 0;

            setInterval(() => {
                imgs[i].classList.remove('active');
                i = (i + 1) % imgs.length;
                imgs[i].classList.add('active');
            }, 2500);
        });


        /* TAP ‚Üí LIGHTBOX FULLSCREEN */
        document.querySelectorAll('.mobile-item').forEach(item => {
            item.addEventListener('click', () => {
                const imgs = item.querySelectorAll('img');
                if (!imgs.length) return;

                let index = 0;
                const lightbox = document.getElementById('lightbox');
                const img = document.getElementById('lightbox-img');

                img.src = imgs[index].src;
                lightbox.classList.remove('hidden');

                img.onclick = () => {
                    index = (index + 1) % imgs.length;
                    img.src = imgs[index].src;
                };
            });
        });
    </script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            if (window.innerWidth > 780) return;

            const coming = document.querySelector('.coming-mobile');
            if (!coming) return;

            setTimeout(() => {
                coming.classList.add('visible');
            }, 4000);
        });
    </script>

</body>
</html>

